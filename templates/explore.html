<html>
    <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title id='title'>Explore</title>

            <!--Font awesome CDN -->
            <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
            <link rel="stylesheet" href="/static/css/explore.css" type="text/css" media="all" />

            <!--JQuery CDN -->
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

            <!-- Open Sans -->
            <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

            <!-- Volkorn for headings -->
            <link href='http://fonts.googleapis.com/css?family=Vollkorn' rel='stylesheet' type='text/css'>

            <!-- Fira Sans for body and h2 -->
            <link href='http://fonts.googleapis.com/css?family=Fira+Sans:400,500,400italic' rel='stylesheet' type='text/css'>

        </head>
    <body>

        <div class="opaque"></div>

        <!-- Build views for the timeline --> 

        <!-- Content for game, including droppable box -->
        <div class="game-content">
        {% for position, docs in solution %}
            <div id="{{docs[0][5]}}{{docs[1][5]}}" class="sol-box" style="left:{{position - 25 | round}}%"></div>
            <div class="arrow-down" style="left:{{position}}%"></div>
        {% endfor %}
        </div>

        <!-- should always be shown -->
        <div class="always-shown">
        {% for doc in items[1] %}
            <div class="time_points", style="left:{{doc[1]}}%">
                <a class="clickable-item" href="#"><i class="fa fa-circle"></i>&nbsp; {{doc[2]["date"]}} </a>
            </div>
        {% endfor %}

        <!-- Draw lines between time points -->
        {% for n in range(tot_points - 1) %}
            <div class="timeline" style="right:{{ 99 - items[1][n+1][1] }}%; left: {{ items[1][n][1] }}%"></div>
        {% endfor %}
            <div class="timeline" style="right:1px; left: 90%"></div>
            <div class="timeline" style="right:89%; left:1px"></div>
        </div>


        <!-- Build first view for explore page -->

        <div class="FixedHeightContainerInit", id="initial_view">
            <div class="Content", id="ContentInit"> 
                <h1>Document Exploration! </h1> 
                <h3>{{directions | safe}}</h3>
                {% for doc in items[0] %}
                    <img class="clickable-doc" id = "{{doc[0][:-4]}}" src="../static/images/explore/{{doc[0][:-4]}}.jpg" alt="{{doc[0][:-4]}}.jpg" style="left:{{loop.index*6}}%">
                {% endfor %}
            </div>
        </div>

        <!-- Use document names to refer to the matching .jpg documents -->
        <!-- in the static/images/explore folder for first view -->

        {% for doc in items[0] %}
            <!-- Build the separate panes for mc and document views -->
            <div class="FixedHeightContainerText", id="{{doc[0][:-4]}}text">
                <div class="Content", id="ContentText">
                    {{ doc[2]["md"]["text"] | safe }}
                    {{ doc[2]["md"]["glossary"] | safe }}
                </div>
            </div>
        
            <div class="FixedHeightContainerMC", id="{{doc[0][:-4]}}mc">
                <div class="Content", id="ContentMC">
                    &nbsp;
                    &nbsp;
                    {{ doc[2]["md"]["mc"] | safe }}
                </div>
                <div class="back-button" onclick=goBack()>
                    <i class="fa fa-arrow-left"></i> Back
                </div>
            </div>

        {% endfor %}

        <script>
        $(document).ready(function(){
            $(".FixedHeightContainerText").hide();
            $(".FixedHeightContainerMC").hide();
            $(".game-content").hide();
        });

        $(".clickable-doc").click(function(){
            $(".FixedHeightContainerText").hide();
            $(".FixedHeightContainerMC").hide();
            $(".game-content").hide();
            $(".FixedHeightContainerInit").hide();
            $("#" + this.id + "text").show();
            $("#" + this.id + "mc").show();

            // $('.clickable-doc').draggable( {
            //     containment:'window',
            //     stack: '.clickable-doc',
            //     revert: true,
            //     appendTo: 'body'
            // });
            // $('.sol-box').droppable( {
            //     drop: handleDropEvent,
            //     accept: ".clickable-doc",
            //     tolerance: "touch"
            // });
            //$(".FixedHeightContainerInit").hide();
            //$("#" + this.parentNode.id + "cont").show();
        });

        function handleDropEvent( event, ui ) {
            alert("lol");
        }

        function goBack() {
            $(".FixedHeightContainerText").hide();
            $(".FixedHeightContainerMC").hide();
            $(".game-content").hide();
            $(".FixedHeightContainerInit").show();
        }

        </script>

    </body>
</html>